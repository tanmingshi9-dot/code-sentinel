# ğŸ“˜ Code-Sentinel Phase 2 æŠ€æœ¯è®¾è®¡æ–‡æ¡£

| æ–‡æ¡£ç‰ˆæœ¬ | V1.0 |
| :--- | :--- |
| **é˜¶æ®µåç§°** | Phase 2: Webç®¡ç†åå°ä¸é…ç½®èƒ½åŠ› |
| **æŠ€æœ¯è´Ÿè´£äºº** | TBD |
| **æ›´æ–°æ—¶é—´** | 2025-12-12 |

---

## 1. è®¾è®¡ç›®æ ‡ä¸åŸåˆ™

### 1.1 Phase 2 æ ¸å¿ƒç›®æ ‡

**ä» MVP å•ä½“å·¥å…·å‡çº§ä¸ºå¤šé¡¹ç›®ç®¡ç†å¹³å°**ï¼š
- âœ… æ”¯æŒå¤šä»“åº“ç‹¬ç«‹é…ç½®
- âœ… å¯è§†åŒ–ç®¡ç†ç•Œé¢
- âœ… ç»“æ„åŒ–å®¡æŸ¥ç»“æœ
- âœ… è¯¯æŠ¥åé¦ˆé—­ç¯

### 1.2 è®¾è®¡åŸåˆ™

1. **å‘åå…¼å®¹**ï¼šå¤ç”¨ Phase 1 æ¶æ„ï¼Œæœ€å°åŒ–æ”¹åŠ¨
2. **æ•°æ®é©±åŠ¨**ï¼šé…ç½®å­˜æ•°æ®åº“ï¼Œçƒ­æ›´æ–°æ— éœ€é‡å¯
3. **å‰åç«¯åˆ†ç¦»**ï¼šReact SPA + Go API
4. **å¯æ‰©å±•æ€§**ï¼šé¢„ç•™ PostgreSQL è¿ç§»èƒ½åŠ›
5. **ç®€å•ä¼˜å…ˆ**ï¼šPhase 2 ä¸åšå¤æ‚æƒé™ï¼Œå†…ç½‘éƒ¨ç½²

---

## 2. æŠ€æœ¯æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Browser (React SPA)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ REST API
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Gin Web Server (Go)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Webhook    â”‚  â”‚   API        â”‚  â”‚   Static     â”‚  â”‚
â”‚  â”‚   Handler    â”‚  â”‚   Handler    â”‚  â”‚   Server     â”‚  â”‚
â”‚  â”‚  (GitHub)    â”‚  â”‚  (CRUD)      â”‚  â”‚  (React)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                 â”‚                              â”‚
â”‚         â–¼                 â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚        Service Layer (æ–°å¢ RepoSvc)     â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚             â”‚
â”‚  â”‚  â”‚ Analyzer â”‚  â”‚  Repo    â”‚  â”‚GitHub â”‚â”‚             â”‚
â”‚  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Svc   â”‚â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                      â”‚                                   â”‚
â”‚                      â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    Store Layer (GORM - æ‰©å±•)            â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   SQLite DB  â”‚
              â”‚  (æ–°å¢è¡¨)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®å˜æ›´**ï¼š
- æ–°å¢ `RepoService` ç®¡ç†ä»“åº“é…ç½®
- `AnalyzerService` æ”¹ä¸ºä»æ•°æ®åº“è¯»é…ç½®ï¼ˆä¸å†ä¾èµ–å…¨å±€é…ç½®ï¼‰
- æ–°å¢ `FeedbackService` å¤„ç†è¯¯æŠ¥åé¦ˆ
- Gin æœåŠ¡ React é™æ€æ–‡ä»¶ï¼ˆå•å®¹å™¨éƒ¨ç½²ï¼‰

### 2.2 æŠ€æœ¯æ ˆï¼ˆå¤ç”¨ Phase 1ï¼‰

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| è¯­è¨€ | Go 1.21+ | å¤ç”¨ç°æœ‰ |
| Web æ¡†æ¶ | Gin | å¤ç”¨ç°æœ‰ |
| ORM | GORM | å¤ç”¨ç°æœ‰ |
| æ•°æ®åº“ | SQLite â†’ PostgreSQL | Phase 2 ç»§ç»­ç”¨ SQLiteï¼Œè®¾è®¡å…¼å®¹è¿ç§» |

---

## 3. æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 ER å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    repos     â”‚         â”‚   reviews    â”‚         â”‚  feedbacks   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ repo_full_   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ review_id    â”‚
â”‚ full_name    â”‚         â”‚   name       â”‚         â”‚ repo_full_   â”‚
â”‚ enabled      â”‚         â”‚ pr_number    â”‚         â”‚   name       â”‚
â”‚ config (JSON)â”‚         â”‚ status       â”‚         â”‚ severity     â”‚
â”‚ last_review  â”‚         â”‚ result (JSON)â”‚         â”‚ reason       â”‚
â”‚ review_count â”‚         â”‚ token_used   â”‚         â”‚ reporter     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 repos è¡¨ï¼ˆæ‰©å±•ï¼‰

**è®¾è®¡å†³ç­–**ï¼š
- **é…ç½®ç”¨ JSON å­˜å‚¨**ï¼šçµæ´»æ‰©å±•ï¼Œæ–°å¢é…ç½®é¡¹æ— éœ€æ”¹è¡¨ç»“æ„
- **ç»Ÿè®¡å­—æ®µå†—ä½™**ï¼šé¿å…æ¯æ¬¡æŸ¥è¯¢æ—¶å…³è” reviews è¡¨èšåˆ

**æ–°å¢å­—æ®µ**ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| config | TEXT (JSON) | ä»“åº“å®¡æŸ¥é…ç½®ï¼Œå­˜å‚¨ ReviewConfig ç»“æ„ |
| last_review_at | DATETIME | æœ€åå®¡æŸ¥æ—¶é—´ï¼Œç”¨äºåˆ—è¡¨æ’åº |
| review_count | INT | ç´¯è®¡å®¡æŸ¥æ¬¡æ•°ï¼Œå†—ä½™å­—æ®µåŠ é€ŸæŸ¥è¯¢ |

**ReviewConfig ç»“æ„è®¾è®¡**ï¼š

| é…ç½®é¡¹ | ç±»å‹ | ç”¨é€” |
|--------|------|------|
| llm_provider | string | LLM æä¾›å•†ï¼šopenai/qwen/azure/ollama |
| model | string | æ¨¡å‹åç§°ï¼šgpt-4-turbo/qwen-max |
| system_prompt | string | è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ |
| review_focus | []string | å®¡æŸ¥é‡ç‚¹ï¼šsecurity/performance/logic/style |
| min_severity | string | æœ€å°æŠ¥å‘Šçº§åˆ«ï¼šP0/P1/P2 |
| languages | []string | æ”¯æŒè¯­è¨€ï¼šgo/java/python |
| ignore_files | []string | å¿½ç•¥æ–‡ä»¶è§„åˆ™ï¼š*.test.go, vendor/* |
| max_diff_lines | int | æœ€å¤§ Diff è¡Œæ•°é™åˆ¶ |
| auto_review | bool | æ˜¯å¦è‡ªåŠ¨å®¡æŸ¥ |

### 3.3 feedbacks è¡¨ï¼ˆæ–°å¢ï¼‰

**è®¾è®¡ç›®çš„**ï¼šå­˜å‚¨è¯¯æŠ¥åé¦ˆæ•°æ®ï¼Œä¸º Phase 3 é”™é¢˜æœ¬åŠŸèƒ½ç§¯ç´¯æ•°æ®

**æ ¸å¿ƒå­—æ®µ**ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| review_id | INT | å…³è”çš„å®¡æŸ¥è®°å½• ID |
| file / line | TEXT / INT | é—®é¢˜æ‰€åœ¨æ–‡ä»¶å’Œè¡Œå· |
| severity / category | TEXT | é—®é¢˜ä¸¥é‡ç¨‹åº¦å’Œç±»åˆ«ï¼ˆå¿«ç…§ï¼‰ |
| ai_content | TEXT | AI åŸå§‹åˆ¤æ–­å†…å®¹ï¼ˆå¿«ç…§ï¼‰ |
| reason | TEXT | ç”¨æˆ·æä¾›çš„è¯¯æŠ¥åŸå›  |
| reporter | TEXT | åé¦ˆäºº GitHub ç”¨æˆ·å |

**ç´¢å¼•è®¾è®¡**ï¼š
- `(repo_full_name, created_at)` - æŒ‰ä»“åº“æŸ¥è¯¢åé¦ˆ
- `(is_false_positive)` - ç»Ÿè®¡è¯¯æŠ¥ç‡

### 3.4 reviews è¡¨ï¼ˆæ— å˜æ›´ï¼‰

ä¿æŒ Phase 1 ç»“æ„ä¸å˜ï¼Œ`result` å­—æ®µå°†å­˜å‚¨ JSON æ ¼å¼çš„ç»“æ„åŒ–å®¡æŸ¥ç»“æœã€‚

### 3.5 æ•°æ®åº“è¿ç§»ç­–ç•¥

**è¿ç§»æ–¹å¼**ï¼šGORM AutoMigrateï¼ˆå¼€å‘ç¯å¢ƒï¼‰

**è¿ç§»å†…å®¹**ï¼š
1. æ‰©å±• repos è¡¨ï¼šæ–°å¢ configã€last_review_atã€review_count å­—æ®µ
2. åˆ›å»º feedbacks è¡¨
3. æ·»åŠ å¿…è¦ç´¢å¼•

---

## 4. API è®¾è®¡

### 4.1 è®¾è®¡è§„èŒƒ

**é€šç”¨è§„èŒƒ**ï¼š
- åŸºç¡€è·¯å¾„ï¼š`/api/v1`
- å“åº”æ ¼å¼ï¼š`{ code: 0, message: "success", data: {} }`
- åˆ†é¡µå‚æ•°ï¼š`page`ã€`page_size`
- æ—¶é—´æ ¼å¼ï¼šISO 8601ï¼ˆUTCï¼‰

**é”™è¯¯ç è®¾è®¡**ï¼š

| é”™è¯¯ç  | å«ä¹‰ |
|--------|------|
| 0 | æˆåŠŸ |
| 400 | å‚æ•°é”™è¯¯ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 409 | èµ„æºå†²çªï¼ˆå·²å­˜åœ¨ï¼‰ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### 4.2 æ¥å£æ¸…å•

#### 4.2.1 ä»“åº“ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/repos | è·å–ä»“åº“åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ï¼‰ |
| POST | /api/repos | åˆ›å»ºä»“åº“ï¼ˆå«é…ç½®ï¼‰ |
| GET | /api/repos/:id | è·å–ä»“åº“è¯¦æƒ…ï¼ˆå«é…ç½®ï¼‰ |
| PUT | /api/repos/:id | æ›´æ–°ä»“åº“é…ç½® |
| DELETE | /api/repos/:id | åˆ é™¤ä»“åº“ï¼ˆçº§è”åˆ é™¤å…³è”æ•°æ®ï¼‰ |
| PUT | /api/repos/:id/toggle | å¯ç”¨/ç¦ç”¨ä»“åº“ |

**å…³é”®å­—æ®µ**ï¼š
- è¯·æ±‚ï¼šfull_nameï¼ˆowner/repo æ ¼å¼ï¼‰ã€enabledã€configï¼ˆJSONï¼‰
- å“åº”ï¼šidã€full_nameã€enabledã€configã€last_review_atã€review_count

#### 4.2.2 å®¡æŸ¥è®°å½•

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/reviews | è·å–å®¡æŸ¥åˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰ä»“åº“ã€çŠ¶æ€ã€æ—¶é—´ç­›é€‰ï¼‰ |
| GET | /api/reviews/:id | è·å–å®¡æŸ¥è¯¦æƒ…ï¼ˆå« AI å®¡æŸ¥ç»“æœï¼‰ |

**ç­›é€‰å‚æ•°**ï¼šrepo_idã€statusã€pr_numberã€start_dateã€end_date

#### 4.2.3 åé¦ˆç®¡ç†

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/feedbacks | è·å–è¯¯æŠ¥åˆ—è¡¨ |
| POST | /api/feedbacks | åˆ›å»ºåé¦ˆï¼ˆWebhook å†…éƒ¨è°ƒç”¨ï¼‰ |
| GET | /api/feedbacks/stats | è·å–è¯¯æŠ¥ç»Ÿè®¡ |

#### 4.2.4 é…ç½®æ¨¡æ¿

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/config-templates | è·å–é¢„ç½®é…ç½®æ¨¡æ¿ï¼ˆé»˜è®¤/å‰ç«¯/åç«¯ï¼‰ |


---

## 5. æœåŠ¡å±‚è®¾è®¡

### 5.1 æœåŠ¡æ¨¡å—æ¦‚è§ˆ

| æœåŠ¡ | ä½ç½® | èŒè´£ |
|------|------|------|
| RepoService | `internal/service/repo.go` | ä»“åº“ CRUDã€é…ç½®ç®¡ç† |
| AnalyzerService | `internal/service/analyzer.go` | PR å®¡æŸ¥æµç¨‹ï¼ˆæ‰©å±•ï¼‰ |
| FeedbackService | `internal/service/feedback.go` | è¯¯æŠ¥åé¦ˆå¤„ç†ï¼ˆæ–°å¢ï¼‰ |

### 5.2 RepoServiceï¼ˆæ–°å¢ï¼‰

**æ ¸å¿ƒæ–¹æ³•**ï¼š

| æ–¹æ³• | åŠŸèƒ½ |
|------|------|
| ListRepos | åˆ†é¡µæŸ¥è¯¢ä»“åº“åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢ |
| CreateRepo | åˆ›å»ºä»“åº“ï¼ŒéªŒè¯åç§°æ ¼å¼ï¼Œåºåˆ—åŒ–é…ç½®ä¸º JSON |
| GetRepoByID | è·å–ä»“åº“è¯¦æƒ…ï¼Œååºåˆ—åŒ–é…ç½® |
| UpdateRepo | æ›´æ–°ä»“åº“é…ç½® |
| DeleteRepo | åˆ é™¤ä»“åº“ï¼ˆçº§è”åˆ é™¤å…³è”æ•°æ®ï¼‰ |
| GetRepoConfig | æ ¹æ® full_name åŠ è½½é…ç½®ï¼ˆä¾› AnalyzerService è°ƒç”¨ï¼‰ |

**è®¾è®¡è¦ç‚¹**ï¼š
- é…ç½®ä»¥ JSON å­˜å‚¨ï¼Œè¯»å–æ—¶ååºåˆ—åŒ–ä¸º ReviewConfig ç»“æ„
- ä»“åº“ç¦ç”¨æ—¶ï¼ŒGetRepoConfig è¿”å›é”™è¯¯ï¼Œé˜»æ­¢å®¡æŸ¥

### 5.3 AnalyzerServiceï¼ˆæ‰©å±•ï¼‰

**Phase 2 å˜æ›´ç‚¹**ï¼š

1. **é…ç½®åŠ è½½**ï¼šä»æ•°æ®åº“è¯»å–ä»“åº“é…ç½®ï¼Œæ›¿ä»£å…¨å±€é…ç½®æ–‡ä»¶
2. **åŠ¨æ€ LLM é€‰æ‹©**ï¼šæ ¹æ®é…ç½®çš„ llm_provider å’Œ model é€‰æ‹©å®¢æˆ·ç«¯
3. **è¿‡æ»¤è§„åˆ™**ï¼šåº”ç”¨ ignore_filesã€languages è¿‡æ»¤å˜æ›´æ–‡ä»¶
4. **Diff é™åˆ¶**ï¼šè¶…è¿‡ max_diff_lines æ—¶è·³è¿‡å®¡æŸ¥
5. **ç»Ÿè®¡æ›´æ–°**ï¼šå®¡æŸ¥å®Œæˆåæ›´æ–° repos.last_review_at å’Œ review_count

**å®¡æŸ¥æµç¨‹**ï¼ˆæ‰©å±•åï¼‰ï¼š

```
1. åŠ è½½ä»“åº“é…ç½®ï¼ˆæ•°æ®åº“ï¼‰
     â†“ é…ç½®ä¸å­˜åœ¨åˆ™ç”¨é»˜è®¤
2. æ£€æŸ¥ auto_review å¼€å…³
     â†“ å…³é—­åˆ™ç›´æ¥è¿”å›
3. è·å– PR Diff
     â†“
4. åº”ç”¨è¿‡æ»¤è§„åˆ™ï¼ˆignore_files, languagesï¼‰
     â†“
5. æ£€æŸ¥ Diff è¡Œæ•°é™åˆ¶
     â†“ è¶…é™åˆ™è·³è¿‡
6. åŠ¨æ€æ„å»º Promptï¼ˆæ³¨å…¥ review_focusï¼‰
     â†“
7. é€‰æ‹© LLM å®¢æˆ·ç«¯ï¼ˆæ ¹æ®é…ç½®ï¼‰
     â†“
8. è°ƒç”¨ LLMï¼Œè§£æ JSON å“åº”
     â†“
9. æŒ‰ min_severity è¿‡æ»¤é—®é¢˜
     â†“
10. å‘å¸ƒè¯„è®ºï¼Œæ›´æ–°ç»Ÿè®¡
```

### 5.4 FeedbackServiceï¼ˆæ–°å¢ï¼‰

**æ ¸å¿ƒæ–¹æ³•**ï¼š

| æ–¹æ³• | åŠŸèƒ½ |
|------|------|
| HandleFalseCommand | å¤„ç† `/false` å‘½ä»¤ï¼Œåˆ›å»ºåé¦ˆè®°å½• |
| ListFeedbacks | åˆ†é¡µæŸ¥è¯¢è¯¯æŠ¥åˆ—è¡¨ |
| GetFeedbackStats | ç»Ÿè®¡è¯¯æŠ¥ç‡ã€åˆ†ç±»åˆ†å¸ƒ |

**`/false` å‘½ä»¤å¤„ç†æµç¨‹**ï¼š

```
1. è§£æè¯„è®ºå†…å®¹ï¼Œæå–åŸå› ï¼ˆ/false åé¢çš„æ–‡æœ¬ï¼‰
2. æŸ¥æ‰¾å…³è”çš„å®¡æŸ¥è®°å½•
3. è§£æå®¡æŸ¥ç»“æœä¸­çš„ issues
4. ä¸ºæ¯ä¸ª issue åˆ›å»º feedback è®°å½•
5. å›å¤ç¡®è®¤è¯„è®º
```

---

## 6. Prompt ä¼˜åŒ–è®¾è®¡

### 6.1 è®¾è®¡ç›®æ ‡

1. **ç»“æ„åŒ–è¾“å‡º**ï¼šAI è¿”å› JSON æ ¼å¼ï¼Œä¾¿äºå‰ç«¯è§£æå±•ç¤º
2. **ä¸¥é‡ç¨‹åº¦åˆ†çº§**ï¼šP0/P1/P2 æ˜ç¡®å®šä¹‰
3. **ä¿®å¤å»ºè®®**ï¼šæ¯ä¸ªé—®é¢˜åŒ…å« suggestion å’Œå¯é€‰çš„ code_fix
4. **åŠ¨æ€å®šåˆ¶**ï¼šæ ¹æ®ä»“åº“é…ç½®æ³¨å…¥ review_focus

### 6.2 JSON è¾“å‡ºæ ¼å¼

```json
{
  "summary": "æœ¬æ¬¡å®¡æŸ¥æ€»ä½“è¯„ä»·",
  "issues": [
    {
      "severity": "P0|P1|P2",
      "category": "security|performance|logic|style",
      "file": "æ–‡ä»¶è·¯å¾„",
      "line": 42,
      "title": "é—®é¢˜æ ‡é¢˜",
      "description": "è¯¦ç»†æè¿°",
      "suggestion": "ä¿®å¤å»ºè®®",
      "code_fix": "ä¿®å¤ä»£ç ï¼ˆå¯é€‰ï¼‰"
    }
  ],
  "stats": { "p0_count": 1, "p1_count": 2, "p2_count": 3 }
}
```

### 6.3 Prompt æ¨¡æ¿è®¾è®¡

**ç³»ç»Ÿæç¤ºè¯**ï¼š
- å®šä¹‰è§’è‰²ï¼ˆä»£ç å®¡æŸ¥ä¸“å®¶ï¼‰
- æ³¨å…¥æ”¯æŒçš„è¯­è¨€ï¼ˆä»é…ç½®è¯»å–ï¼‰
- æ³¨å…¥å®¡æŸ¥é‡ç‚¹ï¼ˆsecurity/performance/logic/styleï¼‰
- å®šä¹‰ P0/P1/P2 çº§åˆ«å«ä¹‰
- å¼ºåˆ¶ JSON æ ¼å¼è¾“å‡º

**ç”¨æˆ·æç¤ºè¯**ï¼š
- å±•ç¤ºå˜æ›´æ–‡ä»¶åˆ—è¡¨
- å±•ç¤º Diff å†…å®¹ï¼ˆunified diff æ ¼å¼ï¼‰

### 6.4 å“åº”è§£æ

**è§£æé€»è¾‘**ï¼š
1. æ¸…ç† AI è¿”å›çš„ markdown åŒ…è£¹ï¼ˆ\`\`\`jsonï¼‰
2. JSON ååºåˆ—åŒ–ä¸º ReviewResult ç»“æ„
3. è§£æå¤±è´¥æ—¶é™çº§ä¸ºçº¯æ–‡æœ¬å±•ç¤º

**å®¹é”™å¤„ç†**ï¼š
- AI å¶å°”ä¸æŒ‰æ ¼å¼è¾“å‡ºï¼Œéœ€è¦å…œåº•é€»è¾‘
- è§£æå¤±è´¥è®°å½•æ—¥å¿—ï¼Œä¸å½±å“ä¸»æµç¨‹

---

## 7. Webhook æ‰©å±•

### 7.1 æ–°å¢äº‹ä»¶ç›‘å¬

**Phase 2 æ–°å¢**ï¼šç›‘å¬ `issue_comment` äº‹ä»¶ï¼Œç”¨äºå¤„ç† `/false` å‘½ä»¤

**äº‹ä»¶å¤„ç†é€»è¾‘**ï¼š

| äº‹ä»¶ç±»å‹ | å¤„ç†é€»è¾‘ |
|----------|----------|
| pull_request | ç°æœ‰é€»è¾‘ï¼Œè§¦å‘ PR å®¡æŸ¥ |
| issue_comment | æ–°å¢ï¼Œæ£€æµ‹ `/false` å‘½ä»¤ï¼Œåˆ›å»ºåé¦ˆè®°å½• |
| ping | è¿”å› pong |

**GitHub é…ç½®**ï¼šéœ€åœ¨ GitHub App è®¾ç½®ä¸­è®¢é˜… `issue_comment` äº‹ä»¶

---

## 8. éƒ¨ç½²ä¸è¿ç»´

### 8.1 éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Docker Container           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Go Server  â”‚  â”‚ React SPA   â”‚  â”‚
â”‚  â”‚  (API)      â”‚  â”‚ (Static)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                         â”‚
â”‚           â–¼                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     SQLite / PostgreSQL     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 éƒ¨ç½²æ­¥éª¤

1. **æ„å»ºå‰ç«¯**ï¼š`cd web && npm run build`
2. **æ„å»ºåç«¯**ï¼š`make build`
3. **æ•°æ®åº“è¿ç§»**ï¼šGORM AutoMigrate è‡ªåŠ¨æ‰§è¡Œ
4. **å¯åŠ¨æœåŠ¡**ï¼š`docker-compose up -d`

---

## 9. é£é™©ä¸åº”å¯¹

| é£é™© | åº”å¯¹æªæ–½ |
|------|----------|
| AI è¾“å‡º JSON æ ¼å¼ä¸ç¨³å®š | åç«¯æ·»åŠ è§£æå…œåº•é€»è¾‘ï¼Œå¤±è´¥æ—¶é™çº§ä¸ºçº¯æ–‡æœ¬ |
| SQLite å¹¶å‘æ€§èƒ½ä¸è¶³ | è®¾è®¡å…¼å®¹ PostgreSQLï¼Œå‡ºç°ç“¶é¢ˆæ—¶è¿ç§» |
| é…ç½®é¡¹è¿‡å¤šç”¨æˆ·ä¸ä¼šé… | æä¾›é¢„ç½®æ¨¡æ¿ï¼Œå…³é”®é…ç½®æ·»åŠ å¸®åŠ©æç¤º |

---

## 10. åç»­æ­¥éª¤

1. âœ… åç«¯æŠ€æœ¯è®¾è®¡ï¼ˆæœ¬æ–‡æ¡£ï¼‰
2. â³ å‰ç«¯æŠ€æœ¯è®¾è®¡ï¼ˆå¾…è¡¥å……ï¼‰
3. â³ å¼€å‘ä»»åŠ¡æ‹†åˆ†
4. â³ Week 1 å¼€å‘å¯åŠ¨

---

## é™„å½•ï¼šé»˜è®¤é…ç½®ç¤ºä¾‹

```json
{
  "llm_provider": "openai",
  "model": "gpt-4-turbo",
  "review_focus": ["security", "performance", "logic"],
  "min_severity": "P1",
  "languages": ["go"],
  "ignore_files": ["*.test.go", "vendor/*"],
  "max_diff_lines": 1000,
  "auto_review": true
}
```

---

# å‰ç«¯æŠ€æœ¯è®¾è®¡

## 11. å‰ç«¯æ¶æ„è®¾è®¡

### 11.1 æŠ€æœ¯æ ˆé€‰å‹

| æŠ€æœ¯ | é€‰å‹ | ç†ç”± |
|------|------|------|
| æ¡†æ¶ | React 18 | ç”Ÿæ€æˆç†Ÿï¼Œç»„ä»¶åŒ–å¼€å‘ |
| è¯­è¨€ | TypeScript | ç±»å‹å®‰å…¨ï¼Œæå‡å¼€å‘ä½“éªŒ |
| æ„å»ºå·¥å…· | Vite | å¿«é€Ÿå†·å¯åŠ¨ï¼ŒHMR ä½“éªŒå¥½ |
| è·¯ç”± | React Router v6 | å®˜æ–¹æ¨èï¼Œå£°æ˜å¼è·¯ç”± |
| UI ç»„ä»¶ | shadcn/ui | åŸºäº Radixï¼Œå¯å®šåˆ¶ï¼Œå¤åˆ¶ç²˜è´´å¼å¼•å…¥ |
| æ ·å¼ | UnoCSS | åŸå­åŒ– CSSï¼Œæ„å»ºæ›´å¿«ï¼Œå…¼å®¹ Tailwind è¯­æ³• |
| çŠ¶æ€ç®¡ç† | React Query + Zustand | æœåŠ¡ç«¯çŠ¶æ€ + å®¢æˆ·ç«¯çŠ¶æ€åˆ†ç¦» |
| HTTP å®¢æˆ·ç«¯ | Axios | æ‹¦æˆªå™¨ã€é”™è¯¯å¤„ç†å®Œå–„ |
| å›¾æ ‡ | Lucide React | è½»é‡ï¼Œé£æ ¼ç»Ÿä¸€ |

### 11.2 é¡¹ç›®ç»“æ„

```
web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                # API è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ client.ts       # Axios å®ä¾‹
â”‚   â”‚   â”œâ”€â”€ repos.ts        # ä»“åº“ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ reviews.ts      # å®¡æŸ¥ç›¸å…³ API
â”‚   â”‚   â””â”€â”€ feedbacks.ts    # åé¦ˆç›¸å…³ API
â”‚   â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn/ui ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout.tsx      # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ repos/          # ä»“åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ reviews/        # å®¡æŸ¥å†å²
â”‚   â”‚   â””â”€â”€ feedbacks/      # è¯¯æŠ¥ç®¡ç†
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ stores/             # Zustand çŠ¶æ€
â”‚   â”œâ”€â”€ types/              # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ lib/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.tsx             # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.tsx            # å…¥å£
â”œâ”€â”€ index.html
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ uno.config.ts
â””â”€â”€ package.json
```

---

## 12. é¡µé¢è®¾è®¡

### 12.1 è·¯ç”±è§„åˆ’

| è·¯ç”± | é¡µé¢ | è¯´æ˜ |
|------|------|------|
| `/` | é‡å®šå‘ | â†’ `/repos` |
| `/repos` | ä»“åº“åˆ—è¡¨ | ä»“åº“ç®¡ç†é¦–é¡µ |
| `/repos/new` | æ–°å»ºä»“åº“ | åˆ›å»ºä»“åº“è¡¨å• |
| `/repos/:id` | ä»“åº“é…ç½® | ç¼–è¾‘ä»“åº“é…ç½® |
| `/reviews` | å®¡æŸ¥å†å² | å®¡æŸ¥è®°å½•åˆ—è¡¨ |
| `/reviews/:id` | å®¡æŸ¥è¯¦æƒ… | å¼¹çª—æˆ–ç‹¬ç«‹é¡µé¢ |
| `/feedbacks` | è¯¯æŠ¥ç®¡ç† | è¯¯æŠ¥è®°å½•åˆ—è¡¨ |

### 12.2 é¡µé¢ç»„ä»¶è®¾è®¡

#### ä»“åº“åˆ—è¡¨é¡µ `/repos`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Code-Sentinel          [ä»“åº“] [å®¡æŸ¥] [åé¦ˆ] â”‚  â† é¡¶éƒ¨å¯¼èˆª
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ä»“åº“ç®¡ç†                        [+ æ–°å»ºä»“åº“]       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ” æœç´¢ä»“åº“...                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä»“åº“å           çŠ¶æ€    å®¡æŸ¥æ•°  æœ€åå®¡æŸ¥    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ owner/repo-1     âœ…å¯ç”¨   42    2å°æ—¶å‰  âš™ï¸ â”‚   â”‚
â”‚  â”‚ owner/repo-2     â¸ï¸ç¦ç”¨   18    3å¤©å‰    âš™ï¸ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â† 1 2 3 ... 10 â†’                                  â”‚  â† åˆ†é¡µ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç»„ä»¶æ‹†åˆ†**ï¼š
- `RepoListPage` - é¡µé¢å®¹å™¨
- `RepoTable` - ä»“åº“è¡¨æ ¼
- `RepoTableRow` - è¡¨æ ¼è¡Œï¼ˆå«å¼€å…³ã€æ“ä½œæŒ‰é’®ï¼‰
- `SearchInput` - æœç´¢æ¡†
- `Pagination` - åˆ†é¡µç»„ä»¶

#### ä»“åº“é…ç½®é¡µ `/repos/:id`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›åˆ—è¡¨    owner/repo-1 é…ç½®                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€ åŸºç¡€é…ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ˜¯å¦å¯ç”¨        [å¼€å…³]                         â”‚ â”‚
â”‚  â”‚ LLM æä¾›å•†      [OpenAI â–¼]                     â”‚ â”‚
â”‚  â”‚ æ¨¡å‹            [gpt-4-turbo â–¼]                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€ å®¡æŸ¥é…ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å®¡æŸ¥é‡ç‚¹        [âœ“å®‰å…¨] [âœ“æ€§èƒ½] [â–¡é£æ ¼] [âœ“é€»è¾‘]â”‚ â”‚
â”‚  â”‚ æœ€å°æŠ¥å‘Šçº§åˆ«    [P1 â–¼]                         â”‚ â”‚
â”‚  â”‚ è‡ªå®šä¹‰æç¤ºè¯    [å¤šè¡Œæ–‡æœ¬æ¡†...]                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€ è¿‡æ»¤è§„åˆ™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ”¯æŒè¯­è¨€        [âœ“Go] [âœ“Python] [â–¡Java]        â”‚ â”‚
â”‚  â”‚ å¿½ç•¥æ–‡ä»¶        [*.test.go] [vendor/*] [+æ·»åŠ ] â”‚ â”‚
â”‚  â”‚ æœ€å¤§ Diff è¡Œæ•°  [1000]                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  [ä¿å­˜é…ç½®]  [é‡ç½®ä¸ºé»˜è®¤]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç»„ä»¶æ‹†åˆ†**ï¼š
- `RepoConfigPage` - é¡µé¢å®¹å™¨
- `ConfigSection` - é…ç½®åˆ†ç»„å¡ç‰‡
- `LLMProviderSelect` - LLM é€‰æ‹©å™¨
- `ReviewFocusCheckbox` - å®¡æŸ¥é‡ç‚¹å¤šé€‰
- `IgnoreFileList` - å¿½ç•¥æ–‡ä»¶åˆ—è¡¨ï¼ˆå¯å¢åˆ ï¼‰

#### å®¡æŸ¥å†å²é¡µ `/reviews`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¡æŸ¥å†å²                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­›é€‰: [å…¨éƒ¨ä»“åº“â–¼] [å…¨éƒ¨çŠ¶æ€â–¼] [æ—¥æœŸèŒƒå›´] [ğŸ”æœç´¢] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ ä»“åº“        â”‚ PR    â”‚ çŠ¶æ€  â”‚ é—®é¢˜  â”‚ æ—¶é—´     â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ owner/repo  â”‚ #42   â”‚ âœ…å®Œæˆ â”‚ ğŸ”´1 ğŸŸ¡2â”‚ 2å°æ—¶å‰  â”‚ â”‚
â”‚  â”‚ owner/repo  â”‚ #41   â”‚ â­ï¸è·³è¿‡ â”‚ -     â”‚ 3å°æ—¶å‰  â”‚ â”‚
â”‚  â”‚ owner/repo2 â”‚ #15   â”‚ âŒå¤±è´¥ â”‚ -     â”‚ 1å¤©å‰    â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‚¹å‡»è¡Œ â†’ å¼¹çª—æ˜¾ç¤ºè¯¦æƒ…**ï¼š
- PR ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€ä½œè€…ã€åˆ†æ”¯ï¼‰
- AI å®¡æŸ¥ç»“æœï¼ˆé—®é¢˜åˆ—è¡¨ï¼ŒæŒ‰ P0/P1/P2 åˆ†ç»„ï¼‰
- å…ƒæ•°æ®ï¼ˆæ¨¡å‹ã€Tokenã€è€—æ—¶ï¼‰

---

## 13. çŠ¶æ€ç®¡ç†è®¾è®¡

### 13.1 React Queryï¼ˆæœåŠ¡ç«¯çŠ¶æ€ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šAPI æ•°æ®ç¼“å­˜ã€è‡ªåŠ¨åˆ·æ–°ã€ä¹è§‚æ›´æ–°

```typescript
// hooks/useRepos.ts
export function useRepos(page: number, search: string) {
  return useQuery({
    queryKey: ['repos', page, search],
    queryFn: () => api.repos.list({ page, search }),
    staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿå†…ä¸é‡æ–°è¯·æ±‚
  });
}

export function useCreateRepo() {
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: api.repos.create,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['repos'] });
    },
  });
}
```

### 13.2 Zustandï¼ˆå®¢æˆ·ç«¯çŠ¶æ€ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šUI çŠ¶æ€ã€ç­›é€‰æ¡ä»¶ã€ç”¨æˆ·åå¥½

```typescript
// stores/filterStore.ts
interface FilterState {
  reviewFilters: {
    repoId: number | null;
    status: string | null;
    dateRange: [Date, Date] | null;
  };
  setReviewFilters: (filters: Partial<FilterState['reviewFilters']>) => void;
}

export const useFilterStore = create<FilterState>((set) => ({
  reviewFilters: { repoId: null, status: null, dateRange: null },
  setReviewFilters: (filters) =>
    set((state) => ({
      reviewFilters: { ...state.reviewFilters, ...filters },
    })),
}));
```

---

## 14. API å°è£…è®¾è®¡

### 14.1 Axios å®ä¾‹

**è®¾è®¡è¦ç‚¹**ï¼š
- ç»Ÿä¸€ baseURL
- è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- é”™è¯¯ç»Ÿä¸€å¤„ç†ï¼ˆToast æç¤ºï¼‰

```typescript
// api/client.ts
const client = axios.create({
  baseURL: '/api',
  timeout: 10000,
});

client.interceptors.response.use(
  (response) => {
    const { code, message, data } = response.data;
    if (code !== 0) {
      toast.error(message);
      return Promise.reject(new Error(message));
    }
    return data;
  },
  (error) => {
    toast.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
    return Promise.reject(error);
  }
);
```

### 14.2 API æ¨¡å—

```typescript
// api/repos.ts
export const reposApi = {
  list: (params: { page: number; search?: string }) =>
    client.get('/repos', { params }),
  
  get: (id: number) => client.get(`/repos/${id}`),
  
  create: (data: CreateRepoRequest) => client.post('/repos', data),
  
  update: (id: number, data: UpdateRepoRequest) =>
    client.put(`/repos/${id}`, data),
  
  delete: (id: number) => client.delete(`/repos/${id}`),
  
  toggle: (id: number, enabled: boolean) =>
    client.put(`/repos/${id}/toggle`, { enabled }),
};
```

---

## 15. UI ç»„ä»¶é€‰å‹

### 15.1 shadcn/ui ç»„ä»¶ä½¿ç”¨

| ç»„ä»¶ | ç”¨é€” |
|------|------|
| Button | æŒ‰é’®ï¼ˆä¸»è¦/æ¬¡è¦/å±é™©ï¼‰ |
| Input | è¾“å…¥æ¡† |
| Select | ä¸‹æ‹‰é€‰æ‹© |
| Switch | å¼€å…³ |
| Checkbox | å¤šé€‰æ¡† |
| Table | æ•°æ®è¡¨æ ¼ |
| Dialog | å¼¹çª—ï¼ˆå®¡æŸ¥è¯¦æƒ…ï¼‰ |
| Toast | æ¶ˆæ¯æç¤º |
| Card | å¡ç‰‡å®¹å™¨ |
| Tabs | æ ‡ç­¾é¡µ |

### 15.2 è‡ªå®šä¹‰ç»„ä»¶

| ç»„ä»¶ | è¯´æ˜ |
|------|------|
| `Layout` | é¡µé¢å¸ƒå±€ï¼ˆä¾§è¾¹æ  + å†…å®¹åŒºï¼‰ |
| `PageHeader` | é¡µé¢æ ‡é¢˜ + æ“ä½œæŒ‰é’® |
| `StatusBadge` | çŠ¶æ€æ ‡ç­¾ï¼ˆæˆåŠŸ/å¤±è´¥/è·³è¿‡ï¼‰ |
| `SeverityBadge` | ä¸¥é‡ç¨‹åº¦æ ‡ç­¾ï¼ˆP0çº¢/P1é»„/P2ç°ï¼‰ |
| `EmptyState` | ç©ºçŠ¶æ€æç¤º |
| `LoadingSpinner` | åŠ è½½çŠ¶æ€ |

---

## 16. æ„å»ºä¸éƒ¨ç½²

### 16.1 å¼€å‘ç¯å¢ƒ

```bash
cd web
npm install
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ http://localhost:5173
```

**Vite ä»£ç†é…ç½®**ï¼š
```typescript
// vite.config.ts
export default defineConfig({
  server: {
    proxy: {
      '/api': 'http://localhost:8080',  // ä»£ç†åˆ°åç«¯
    },
  },
});
```

### 16.2 ç”Ÿäº§æ„å»º

```bash
npm run build        # è¾“å‡ºåˆ° dist/
```

**äº§ç‰©ä½ç½®**ï¼š`web/dist/`

**åç«¯æœåŠ¡**ï¼šGin é™æ€æ–‡ä»¶æœåŠ¡ `web/dist`

### 16.3 ç›®å½•ç»“æ„ï¼ˆæ„å»ºåï¼‰

```
web/dist/
â”œâ”€â”€ index.html
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-xxx.js      # ä¸» JS bundle
â”‚   â”œâ”€â”€ index-xxx.css     # ä¸» CSS
â”‚   â””â”€â”€ vendor-xxx.js     # ç¬¬ä¸‰æ–¹åº“
â””â”€â”€ favicon.ico
```

---

## 17. å‰ç«¯å¼€å‘è®¡åˆ’

| å‘¨æ¬¡ | ä»»åŠ¡ |
|------|------|
| Week 1 | é¡¹ç›®åˆå§‹åŒ–ã€shadcn/ui é›†æˆã€Layout ç»„ä»¶ã€API å°è£… |
| Week 2 | ä»“åº“åˆ—è¡¨é¡µã€æ–°å»ºä»“åº“é¡µã€ä»“åº“é…ç½®é¡µ |
| Week 3 | å®¡æŸ¥å†å²é¡µã€å®¡æŸ¥è¯¦æƒ…å¼¹çª—ã€Prompt è”è°ƒ |
| Week 4 | è¯¯æŠ¥åˆ—è¡¨é¡µã€å‰åç«¯è”è°ƒã€éƒ¨ç½²ä¼˜åŒ– |
